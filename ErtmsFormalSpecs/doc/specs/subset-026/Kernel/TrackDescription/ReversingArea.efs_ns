<NameSpace
 X="220"
 Y="650"
 Width="100"
 Height="50"
 Name="ReversingArea"
 Guid="4539f8ea-644b-4ee0-848d-20a3d0ff72d9"
>
<NameSpaces>
</NameSpaces>
<Structures>
<Structure
 Default=""
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="ReversingAreaInformation"
 Guid="c3674828-e194-402c-a734-a3f29b2ff94d"
>
<StructureElement
 TypeName="Default.BaseTypes.Distance"
 Default="0.0"
 Mode="Internal"
 Implemented="TRUE"
 Name="Distance"
 Guid="ab39d192-5f11-4bba-bf9b-67206e5bc20f"
>
<ReqRef
 Id="440cd70b-ba2e-4784-94eb-e86061e6397c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9b0bbce5-367d-4cc2-b31d-4919055e56ec"
>
</ReqRef></StructureElement><StructureElement
 TypeName="Default.BaseTypes.Length"
 Default="0.0"
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Length"
 Guid="84cf01dd-5f46-4f69-919a-d91b3a76eced"
>
<ReqRef
 Id="faec86d1-d6e7-42ac-88c2-a547be018a65"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="609c3865-2bcc-41b6-b91e-2e19db23e729"
>
</ReqRef></StructureElement><StructureElement
 TypeName="Default.BaseTypes.Distance"
 Default="0.0"
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="MaxDistance"
 Guid="aeb3d42c-0f35-48cf-9734-a4c61ad905ac"
>
<ReqRef
 Id="9576c9d7-f121-46e0-aae3-27170e0d7846"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="67f0cf5b-5457-4395-8063-152ea5397cd8"
>
</ReqRef><ReqRef
 Id="f4d58bfc-b004-4e15-9756-926a4d1205e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="370d604e-a1b5-46ef-9a89-9047903db048"
>
</ReqRef></StructureElement><StructureElement
 TypeName="Default.BaseTypes.Speed"
 Default="0.0"
 Mode="Internal"
 Implemented="TRUE"
 Name="Speed"
 Guid="78661f79-1b8a-4b8e-92ed-3dad0d60184f"
>
<ReqRef
 Id="93098cba-bfd3-4dc4-ba29-a6f4fdc5a8cb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="40348f25-0926-4d20-8d40-3d6d01c2d2b4"
>
</ReqRef><ReqRef
 Id="46aa1e33-5007-43a9-9c7f-3241bba8bbed"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c577d8ea-46d9-4c98-9514-0eaefd361a8d"
>
</ReqRef></StructureElement></Structure></Structures>
<Procedures>
<Procedure
 Implemented="TRUE"
 Name="ReversingSupervisionInformationReceived"
 Guid="b4e0a17b-bb01-4690-bfa1-d1cc1ae7a7ff"
>
<ReqRef
 Id="46356051-e464-4ceb-b54c-41ef8dc6017f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5ef5c03e-0cea-45f1-8650-413d9f1c4b9c"
>
</ReqRef><ReqRef
 Id="9be8a6ae-9abe-4a16-8a19-f28a0581c994"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="05c8cbd3-76f7-4f25-a1a4-ee6e1899ac04"
>
</ReqRef><ReqRef
 Id="1ae6444b-a835-402b-8bcb-d8f22f5d6aab"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a0da2c3a-fcea-4946-b80b-54fc7ffe7bae"
>
</ReqRef><ReqRef
 Id="1fc082d9-dd7b-437d-98f2-570cb6d352e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="797da7fc-90d7-4510-9295-58118f0940d3"
>
</ReqRef><Comment>Handles a new reversing supervision information packet if a new reversing area was not defined with it</Comment>
<Parameters>
<Parameter
 Type="Messages.PACKET.TRACK_TO_TRAIN.REVERSING_SUPERVISION_INFORMATION.Message"
 Name="RVSupervisionPacket"
 Guid="d9301eae-66f2-4fec-8c01-a077fb413155"
>
</Parameter></Parameters>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Update Reversing Supervision information"
 Guid="43a5230e-ee0c-454c-bdda-c158be8c2ff2"
>
<ReqRef
 Id="f4d58bfc-b004-4e15-9756-926a4d1205e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bf4aaa35-9ded-4f0d-acb2-bc1bbdbfde82"
>
</ReqRef><ReqRef
 Id="93098cba-bfd3-4dc4-ba29-a6f4fdc5a8cb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4d0f56dd-44f0-4f9b-96be-3debdaf520a1"
>
</ReqRef><ReqRef
 Id="c0badaef-72d8-45d1-ab9f-8d178e73e47d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3dbbf442-df33-4370-b3ac-9c11622e501a"
>
</ReqRef><ReqRef
 Id="53afec70-5418-4e7d-9064-ba5f0d67662c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a4a892d3-9a55-49e6-aa18-6a25238387e9"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Name="Update Reversing Area information"
 Guid="16dfd974-def9-41cb-afc1-1750d9851aca"
>
<PreConditions>
<PreCondition
 Guid="8ff6903f-16b5-48f5-99cd-994b7321e363"
>Mode != Mode.TR</PreCondition></PreConditions>
<Actions>
<Action
 Guid="65408a4d-b8a9-4230-8efc-b804bf55df31"
>ReversingAreaProfile.MaxDistance &lt;- MessageTypes.QScaleDistance ( distance =&gt; RVSupervisionPacket.D_REVERSE, scale =&gt; RVSupervisionPacket.Q_SCALE )</Action><Action
 Guid="8ce3f2d2-574a-40b8-920a-e8a1c9b0eb2e"
>ReversingAreaProfile.Speed &lt;- MessageTypes.SpeedResolution ( speed =&gt; RVSupervisionPacket.V_REVERSE, resolution =&gt; 5.0 )</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 Implemented="TRUE"
 Name="ReversingAreaInformationReceived"
 Guid="f8edd247-a1c3-4973-b7cb-cb278593e058"
>
<ReqRef
 Id="571b7bcf-500a-4e43-8f4b-dfb64cfd4845"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="79be5212-206a-4c1a-a7b2-827d9628c3ee"
>
</ReqRef><ReqRef
 Id="54c20a27-60da-4df1-80ba-7ba841d7258f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e09f2b5a-8dcd-43f7-ad06-66892ecaf660"
>
</ReqRef><ReqRef
 Id="f3aec789-8e42-4041-befb-bf3d53519577"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c8592532-483d-46e9-9806-015e77c81fc0"
>
</ReqRef><ReqRef
 Id="e9d57d91-d39a-4190-841c-fb33c0eeee48"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b29f23ba-6240-499a-bb96-19b60a20f6f2"
>
</ReqRef><ReqRef
 Id="9be8a6ae-9abe-4a16-8a19-f28a0581c994"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="85b40427-f8b8-4252-9a98-6c59ccd92a99"
>
</ReqRef><ReqRef
 Id="1ae6444b-a835-402b-8bcb-d8f22f5d6aab"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="810d2e4a-3175-44d2-b9d2-38ac449b0e7a"
>
</ReqRef><ReqRef
 Id="1fc082d9-dd7b-437d-98f2-570cb6d352e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2edbf224-42dd-42e1-8f15-87d08bb16c93"
>
</ReqRef><Comment>Handles a new reversing area information packet with the accompanying reversing supervision information</Comment>
<Parameters>
<Parameter
 Type="Messages.PACKET.TRACK_TO_TRAIN.REVERSING_AREA_INFORMATION.Message"
 Name="RVAreaPacket"
 Guid="0fe1537a-4ffa-42a1-887b-2223cc41d991"
>
</Parameter><Parameter
 Type="Messages.PACKET.TRACK_TO_TRAIN.REVERSING_SUPERVISION_INFORMATION.Message"
 Name="RVSupervisionPacket"
 Guid="79c524dc-e5e4-4874-839c-d81252a677d3"
>
</Parameter></Parameters>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Update Reversing Area information"
 Guid="78ef45d7-f4d4-48af-bc3e-6b1f73959123"
>
<ReqRef
 Id="5c6d17a2-fb76-49ca-a5dd-f555641e5dac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b60cf675-1afb-444e-81a9-2a0e73c7cdca"
>
</ReqRef><ReqRef
 Id="f4d58bfc-b004-4e15-9756-926a4d1205e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="caa83c74-1b02-4fb9-8efc-d5a4595b2c04"
>
</ReqRef><ReqRef
 Id="93098cba-bfd3-4dc4-ba29-a6f4fdc5a8cb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="45dfd274-da51-484a-bc7d-63e67d77d513"
>
</ReqRef><ReqRef
 Id="c0badaef-72d8-45d1-ab9f-8d178e73e47d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="478baa92-3cf1-43f1-826d-6fde8de1fc54"
>
</ReqRef><ReqRef
 Id="a52cd2e6-58e1-4320-84fc-de81d25edd20"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c5fb2bfc-554e-4f07-b20c-fc3f4671f27c"
>
</ReqRef><ReqRef
 Id="1cb531d4-2809-484c-bf3f-445bebb332ef"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bef79822-f875-43cf-ba35-1df7cdbcc538"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Name="Update Reversing Area information"
 Guid="4612bbee-35e2-445b-83a2-bb53c0b0651d"
>
<PreConditions>
<PreCondition
 Guid="a3235e9b-ce8d-4391-b487-4ca2b69ae988"
>Mode != Mode.TR</PreCondition></PreConditions>
<Actions>
<Action
 Guid="c9a4ad75-65e9-41d9-8526-ceb6c810d342"
>ReversingAreaProfile &lt;- ReversingAreaInformation
{
    Distance =&gt; MessageTypes.QScaleDistance ( distance =&gt; RVAreaPacket.D_STARTREVERSE, scale =&gt; RVAreaPacket.Q_SCALE ),
    Length =&gt; MessageTypes.QScaleLength ( length =&gt; RVAreaPacket.L_REVERSEAREA, scale =&gt; RVAreaPacket.Q_SCALE ),
    MaxDistance =&gt; MessageTypes.QScaleDistance ( distance =&gt; RVSupervisionPacket.D_REVERSE, scale =&gt; RVSupervisionPacket.Q_SCALE ),
    Speed =&gt; MessageTypes.SpeedResolution ( speed =&gt; RVSupervisionPacket.V_REVERSE, resolution =&gt; 5.0 )
}</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure></Procedures>
<Variables>
<Variable
 Type="ReversingArea.ReversingAreaInformation"
 DefaultValue="EMPTY"
 VariableMode="Internal"
 Implemented="TRUE"
 Name="ReversingAreaProfile"
 Guid="56008f14-0b02-47d7-be00-a5b02d6c7d92"
>
<ReqRef
 Id="571b7bcf-500a-4e43-8f4b-dfb64cfd4845"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2e184734-cac1-4df1-a2b6-1ceb0b199b57"
>
</ReqRef><ReqRef
 Id="e9d57d91-d39a-4190-841c-fb33c0eeee48"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8730bc4d-852c-4b1b-ad08-774ca6c8b1fd"
>
</ReqRef><ReqRef
 Id="f32ad7de-67d9-4075-bb38-75a13996ad98"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7c87ad45-99cc-4709-86e1-66f5ce7e7443"
>
</ReqRef><ReqRef
 Id="c93e250c-fc42-406f-9706-6ec7488b8982"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="df138134-5366-4a4a-9e90-f45dc0a4aca0"
>
</ReqRef><Comment>Represents the location and supervision information of the reversing area.</Comment>
</Variable><Variable
 Type="Boolean"
 DefaultValue="Boolean.False"
 VariableMode="Incoming"
 Implemented="TRUE"
 Name="DriverTriesReversing"
 Guid="8e6bc53c-889f-4e9e-802a-15a2c00d851e"
>
<ReqRef
 Id="e3631d58-4959-4120-ba5d-9c47c20697ac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b8edbd34-39d9-4d5b-a5f2-1fafd2f98962"
>
</ReqRef><Comment>Information provided by the direction controller in the reverse position indicating that the driver tries to initiate reverse movement.</Comment>
</Variable></Variables>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Display reversing is possible"
 Guid="f30a4340-e68f-4699-8d96-297121cc4043"
>
<ReqRef
 Id="e5f97755-8416-4822-93e4-2c3e935d4b0e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7646c3c6-c98f-4c1c-948d-23407b55e499"
>
</ReqRef><ReqRef
 Id="29dc5283-29cc-4891-9d74-78e5761b8a31"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="be872f04-05c7-4c07-9c4e-ced3f4785f92"
>
</ReqRef><ReqRef
 Id="8fbfc24f-85cf-4a9a-92c5-bdff11b4a94c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d9eae696-5553-4e54-9fe1-9c7d36984134"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Name="Display reversing is possible"
 Guid="34c1c15d-2542-4693-8f4c-fa21656c0db9"
>
<PreConditions>
<PreCondition
 Guid="3a60ad8a-066b-4032-aad4-7f219f88137c"
>Available ( ReversingAreaProfile )
  AND  
ReversingAreaProfile.Distance &lt;= TrainPosition.FrontEndPosition ( DistanceInterval.Nom )
  AND  
TrainPosition.FrontEndPosition ( DistanceInterval.Nom ) &lt; ReversingAreaProfile.Distance + BaseTypes.LengthToDistance ( ReversingAreaProfile.Length )</PreCondition><PreCondition
 Guid="e2780f24-dfce-4f80-a1ed-40804c6f02f9"
>Odometry.TrainIsAtStandstill()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="c6bbbe2b-df51-414e-8d94-4d76c44eb4a0"
>DMI.MasterDMI().DisplayReversingAllowed()</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Ask acknowledge of RV mode"
 Guid="99a34030-abb4-4de0-81bd-caf232e017fa"
>
<ReqRef
 Id="e3631d58-4959-4120-ba5d-9c47c20697ac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4d6dab7d-3951-4a3f-b33a-84a4db385f24"
>
</ReqRef><ReqRef
 Id="8d1e3977-b707-4d35-b1ef-efbfffcd16e6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fbbde686-60e2-4ec4-b0e3-14492941dd78"
>
</ReqRef><ReqRef
 Id="e9db5333-b289-4dc4-a0ff-2523b0f32009"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="444bd9cb-97de-4907-bf65-2b50208b648a"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Ask acknowledge of RV mode"
 Guid="ff334cc3-7e39-49af-8b39-e6763492aa47"
>
<PreConditions>
<PreCondition
 Guid="02c224ed-0cc3-46ef-b8e8-dec3d21df680"
>DriverTriesReversing</PreCondition><PreCondition
 Guid="a87006bb-b89e-40ff-a62f-44b80838edb8"
>NOT (DMI.MasterDMI().In_AcknOfRVMode.InputInformation.DisplayRequested)</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ed5d42aa-ccad-44b5-b83e-130460638fea"
>DMI.MasterDMI().InitiateAcknOfRVMode()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Stop displaying reversing"
 Guid="90328f0a-2643-46c8-8557-a501d97d34d2"
>
<Comment>If the train starts moving forwards again after stopping in a reversing area, stop displaying the reversing acknowledgements on the DMI</Comment>
<PreConditions>
<PreCondition
 Guid="1113e21c-9e1a-49e0-a1f1-181177c541a7"
>NOT (Odometry.TrainIsAtStandstill())</PreCondition></PreConditions>
<Actions>
<Action
 Guid="693639f6-da52-48b4-9947-750a66a4dcf4"
>DMI.MasterDMI().HideReversingAllowed()</Action><Action
 Guid="315ca243-f3b2-480f-87b3-9bdefeaa17b1"
>DMI.MasterDMI().DisableAcknOfRVMode()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</NameSpace>
